{
    "name": "Power Details",
    "category": "Power",
    "group": "Solar Edge",
    "description": "Solar Edge Detailed site power measurements",

    "driver": "solaredge",
    "devices": [
        {
        	"name": "solaredge",
            "description": "Solar Edge Connection"
        }
    ],

    "options": [
        {
            "id": "address",
            "name": "Address",
            "description": "Http Address of Solar Edge",
            "type": "text",
            "default": "https://monitoringapi.solaredge.com/",
            "mandatory": true,
            "syntax": "deviceAddress"
        },
        {
            "id": "siteId",
            "name": "Site Id",
            "description": "The site identifier (number)",
            "type": "text",
            "mandatory": true,
            "syntax": "deviceAddress"
        },
        {
            "id": "authentication",
            "name": "Authentication",
            "description": "Authentication Key",
            "type": "text",
            "mandatory": true,
            "syntax": "deviceSettings"
        },
        {
            "id": "timeUnit",
            "name": "Time Unit",
            "description": "Time Unit for Requests",
            "type": "selection",
            "select": [
                { "name": "15 Minutes", "value": "QUARTER_OF_AN_HOUR" },
                { "name": "30 Minutes", "value": "HALF_OF_AN_HOUR" },
                { "name": "1 Hour", "value": "HOUR" },
                { "name": "1 Day", "value": "DAY" },
                { "name": "1 Week", "value": "WEEK" }
            ],
            "default": "QUARTER_OF_AN_HOUR",
            "mandatory": false,
            "syntax": "channelSettings"
        }
    ],

    "channels": [
        {
            "name": "<node>_production",
            "description": "Production",
            "address": "powerDetails Production",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 180000},
            "configs": {"samplingInterval": 5000, "valueType":"FLOAT", "unit":"W"},
            "processList": [
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>", "tag": "Production"}
                }
            ]
        },
        {
            "name": "<node>_consumption",
            "description": "Consumption",
            "address": "powerDetails Consumption",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 180000},
            "configs": {"samplingInterval": 5000, "valueType":"FLOAT", "unit":"W"},
            "processList": [
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>", "tag": "Consumption"}
                }
            ]
        },
        {
            "name": "<node>_selfconsumption",
            "description": "SelfConsumption",
            "address": "powerDetails SelfConsumption",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 180000},
            "configs": {"samplingInterval": 5000, "valueType":"FLOAT", "unit":"W"},
            "processList": [
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>", "tag": "SelfConsumption"}
                }
            ]
        },
        {
            "name": "<node>_feedin",
            "description": "FeedIn",
            "address": "powerDetails FeedIn",
            "settings": "type:ATTRIBUTE",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 180000},
            "configs": {"samplingInterval": 5000, "valueType":"FLOAT", "unit":"W"},
            "processList": [
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>", "tag": "FeedIn"}
                }
            ]
        },
        {
            "name": "<node>_purchased",
            "description": "Purchased",
            "address": "powerDetails Purchased",
            "settings": "type:ATTRIBUTE",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 180000},
            "configs": {"samplingInterval": 5000, "valueType":"FLOAT", "unit":"W"},
            "processList": [
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>", "tag": "Purchased"}
                }
            ]
        }
    ],

    "feeds": [
        {
            "name": "<node>",
            "tag": "Production",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPTIMESERIES",
            "unit": "W"
        },
        {
            "name": "<node>",
            "tag": "Consumption",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPTIMESERIES",
            "unit": "W"
        },
        {
            "name": "<node>",
            "tag": "SelfConsumption",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPTIMESERIES",
            "unit": "W"
        },
        {
            "name": "<node>",
            "tag": "FeedIn",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPTIMESERIES",
            "unit": "W"
        },
        {
            "name": "<node>",
            "tag": "Purchased",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPTIMESERIES",
            "unit": "W"
        }
    ],

    "syntax": {
     	"deviceAddress": {
        	"keyValue": false,
    		"separator": ";"
    	},
    	"deviceSettings": {
        	"keyValue": true,
        	"assignment": "=",
    		"separator": ";"
    	},
    	"channelSettings": {
        	"keyValue": true,
        	"assignment": "=",
    		"separator": ";"
    	}
    	
    }
}